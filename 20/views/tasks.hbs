<!DOCTYPE html>
<html>
  <head>
    <script type="text/handlebars"></script>
    <meta charset="utf-8">
    <title>Tasks</title>
     <script defer="true">
   async function DeleteMethod(ID) {
    const options = {
        method: 'DELETE',
        headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json'   
        }
};
  
    try
        {
      
          const response = await fetch('http://localhost:3000/task/delete/'+ ID , options);
          document.location.href = 'http://localhost:3000/task'; 
        }
        catch(err)
        {
          console.log(err);
        }
        
    }
  </script>
  </head>
<style>
  .but{
   background-color: rgb(248, 188, 248);
   border: none;
    border-radius: 5px;
   }
    body
      {
        background-color: rgb(248, 246, 202);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      th 
{
  background-color: rgb(248, 188, 248);
  border-radius: 3px;
}
a {
  color:rgb(94, 7, 55)
  
}
</style>
  
  <body>

     <a href="/task/form">Add task</a>
     <a href="/task/overdue">Get overdue tasks</a>
     <a href="/task/noverdue">Get current tasks</a>
     <a href="/depart">Departments</a>
     <a href="/employee">Employees</a>
    <h1>List of Tasks</h1>
    <table>
      <thead>
        <tr>
          <th>Name of task</th>
          <th>Description</th>
           <th>Deadline</th>
           
           <th>Employee</th>
         
           <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {{#each tasks}}
          <tr>
            <td>{{Name}}</td>
            <td>{{Description}}</td>
            <td>{{Deadline}}</td>
            <td>{{Employees.LastName}}</td>
            <td>{{Status}}</td>
            <td>
                    <a href="/task/form/{{ID}}"> Edit</a>
            </td>
            <td>
                    <button class="but" onclick="DeleteMethod({{ID}})" type="submit"> Delete</button>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
    <div>  
    </div>
  </body>
</html>